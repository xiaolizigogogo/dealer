<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.utonw.dealer.mapper.CarFileMapper">
	<resultMap id="BaseResultMap" type="com.utonw.dealer.api.entity.CarFile">
		<!--
		  WARNING - @mbggenerated
		  This element is automatically generated by MyBatis Generator, do not modify.
		-->
		<id column="id" jdbcType="VARCHAR" property="id" />
		<result column="product_id" jdbcType="INTEGER" property="productId" />
		<result column="headlineType" jdbcType="INTEGER" property="headlinetype" />
		<result column="picPath" jdbcType="VARCHAR" property="picpath" />
		<result column="uploadTime" jdbcType="TIMESTAMP" property="uploadtime" />
		<result column="updateTime" jdbcType="TIMESTAMP" property="updatetime" />
		<result column="updateBy" jdbcType="VARCHAR" property="updateby" />
	</resultMap>
	<sql id="Base_Column_List">
		<!--
		  WARNING - @mbggenerated
		  This element is automatically generated by MyBatis Generator, do not modify.
		-->
		id, product_id, headlineType, picPath, uploadTime, updateTime, updateBy
	</sql>

	<select id="selectCarFilePic" parameterType="java.lang.String" resultType="com.utonw.dealer.api.dto.response.CarPicResponse">
		SELECT
			CASE
				WHEN cf.headlineType='picture' THEN '大照'
				WHEN cf.headlineType='drivingLicense' THEN '行驶证'
				WHEN cf.headlineType='identityCard' THEN '原车主身份证'
				WHEN cf.headlineType='insurance' THEN '保险单'
				WHEN cf.headlineType='primaryPicUrl' THEN '现车照片'
				WHEN cf.headlineType='maintenance' THEN '4s维保记录'
				WHEN cf.headlineType='collectContract' THEN '收车合同'
	      		 WHEN cf.headlineType='vehicleTradingContract' THEN '车辆交易合同'
	        	WHEN cf.headlineType='obd' THEN 'OBD'
	            WHEN cf.headlineType='obdBinding' THEN 'OBD绑定'
	            WHEN cf.headlineType='steeringWheel' THEN 'VIN码照片'
	            WHEN cf.headlineType='rfid' THEN 'RFID'
	            WHEN cf.headlineType='licensePlate' THEN '车牌照'
	            WHEN cf.headlineType='rfidvin' THEN 'rfidVin码照片'
	            WHEN cf.headlineType='afterPicture' THEN '过户后车辆大照'
	            WHEN cf.headlineType='afterDrivingLicense' THEN '过户后行驶证'
	            WHEN cf.headlineType='afterLicensePlate' THEN '过户后车牌号'
				ELSE ''
			END AS fileName ,cf.picPath AS fileUrl
		FROM car_file cf
		INNER JOIN merchant_indent mi ON cf.product_id = mi.productId
		WHERE mi.id = #{id}
		order by cf.headlineType
	</select>

	<select id="selectCarPicByIndentId" parameterType="java.lang.String" resultType="java.lang.String">
		SELECT cf.picPath
		FROM car_file cf
		LEFT JOIN merchant_indent mi ON mi.productId = cf.product_id
		WHERE cf.headlineType = 'vehicleTradingContract'
		AND mi.id = #{id}
	</select>

</mapper>