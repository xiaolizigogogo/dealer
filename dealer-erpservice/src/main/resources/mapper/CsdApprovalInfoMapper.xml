<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.utonw.utonerp.mapper.CsdApprovalInfoMapper">
  <resultMap id="BaseResultMap" type="com.utonw.dealer.api.entity.CsdApprovalInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="orderId" jdbcType="VARCHAR" property="orderid" />
    <result column="approvalStatus" jdbcType="VARCHAR" property="approvalstatus" />
    <result column="approvalLevel" jdbcType="VARCHAR" property="approvallevel" />
    <result column="approvalAmount" jdbcType="DECIMAL" property="approvalamount" />
    <result column="approvalId" jdbcType="VARCHAR" property="approvalid" />
    <result column="approvalTime" jdbcType="TIMESTAMP" property="approvaltime" />
    <result column="lendedTime" jdbcType="TIMESTAMP" property="lendedtime" />
    <result column="lendedPic" jdbcType="VARCHAR" property="lendedpic" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.utonw.dealer.api.entity.CsdApprovalInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="approvalConclusion" jdbcType="LONGVARCHAR" property="approvalconclusion" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, orderId, approvalStatus, approvalLevel, approvalAmount, approvalId, approvalTime,
    lendedTime, lendedPic
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    approvalConclusion
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from csd_approval_info
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from csd_approval_info
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.utonw.dealer.api.entity.CsdApprovalInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into csd_approval_info (id, orderId, approvalStatus,
    approvalLevel, approvalAmount, approvalId,
    approvalTime, lendedTime, lendedPic,
    approvalConclusion)
    values (#{id,jdbcType=BIGINT}, #{orderid,jdbcType=VARCHAR}, #{approvalstatus,jdbcType=VARCHAR},
    #{approvallevel,jdbcType=VARCHAR}, #{approvalamount,jdbcType=DECIMAL}, #{approvalid,jdbcType=VARCHAR},
    #{approvaltime,jdbcType=TIMESTAMP}, #{lendedtime,jdbcType=TIMESTAMP}, #{lendedpic,jdbcType=VARCHAR},
    #{approvalconclusion,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.utonw.dealer.api.entity.CsdApprovalInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into csd_approval_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="orderid != null">
        orderId,
      </if>
      <if test="approvalstatus != null">
        approvalStatus,
      </if>
      <if test="approvallevel != null">
        approvalLevel,
      </if>
      <if test="approvalamount != null">
        approvalAmount,
      </if>
      <if test="approvalid != null">
        approvalId,
      </if>
      <if test="approvaltime != null">
        approvalTime,
      </if>
      <if test="lendedtime != null">
        lendedTime,
      </if>
      <if test="lendedpic != null">
        lendedPic,
      </if>
      <if test="approvalconclusion != null">
        approvalConclusion,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="orderid != null">
        #{orderid,jdbcType=VARCHAR},
      </if>
      <if test="approvalstatus != null">
        #{approvalstatus,jdbcType=VARCHAR},
      </if>
      <if test="approvallevel != null">
        #{approvallevel,jdbcType=VARCHAR},
      </if>
      <if test="approvalamount != null">
        #{approvalamount,jdbcType=DECIMAL},
      </if>
      <if test="approvalid != null">
        #{approvalid,jdbcType=VARCHAR},
      </if>
      <if test="approvaltime != null">
        #{approvaltime,jdbcType=TIMESTAMP},
      </if>
      <if test="lendedtime != null">
        #{lendedtime,jdbcType=TIMESTAMP},
      </if>
      <if test="lendedpic != null">
        #{lendedpic,jdbcType=VARCHAR},
      </if>
      <if test="approvalconclusion != null">
        #{approvalconclusion,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.utonw.dealer.api.entity.CsdApprovalInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update csd_approval_info
    <set>
      <if test="orderid != null">
        orderId = #{orderid,jdbcType=VARCHAR},
      </if>
      <if test="approvalstatus != null">
        approvalStatus = #{approvalstatus,jdbcType=VARCHAR},
      </if>
      <if test="approvallevel != null">
        approvalLevel = #{approvallevel,jdbcType=VARCHAR},
      </if>
      <if test="approvalamount != null">
        approvalAmount = #{approvalamount,jdbcType=DECIMAL},
      </if>
      <if test="approvalid != null">
        approvalId = #{approvalid,jdbcType=VARCHAR},
      </if>
      <if test="approvaltime != null">
        approvalTime = #{approvaltime,jdbcType=TIMESTAMP},
      </if>
      <if test="lendedtime != null">
        lendedTime = #{lendedtime,jdbcType=TIMESTAMP},
      </if>
      <if test="lendedpic != null">
        lendedPic = #{lendedpic,jdbcType=VARCHAR},
      </if>
      <if test="approvalconclusion != null">
        approvalConclusion = #{approvalconclusion,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.utonw.dealer.api.entity.CsdApprovalInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update csd_approval_info
    set orderId = #{orderid,jdbcType=VARCHAR},
    approvalStatus = #{approvalstatus,jdbcType=VARCHAR},
    approvalLevel = #{approvallevel,jdbcType=VARCHAR},
    approvalAmount = #{approvalamount,jdbcType=DECIMAL},
    approvalId = #{approvalid,jdbcType=VARCHAR},
    approvalTime = #{approvaltime,jdbcType=TIMESTAMP},
    lendedTime = #{lendedtime,jdbcType=TIMESTAMP},
    lendedPic = #{lendedpic,jdbcType=VARCHAR},
    approvalConclusion = #{approvalconclusion,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.utonw.dealer.api.entity.CsdApprovalInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update csd_approval_info
    set orderId = #{orderid,jdbcType=VARCHAR},
    approvalStatus = #{approvalstatus,jdbcType=VARCHAR},
    approvalLevel = #{approvallevel,jdbcType=VARCHAR},
    approvalAmount = #{approvalamount,jdbcType=DECIMAL},
    approvalId = #{approvalid,jdbcType=VARCHAR},
    approvalTime = #{approvaltime,jdbcType=TIMESTAMP},
    lendedTime = #{lendedtime,jdbcType=TIMESTAMP},
    lendedPic = #{lendedpic,jdbcType=VARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>

  <select id="selectAllByOrderUUID"  resultMap="BaseResultMap">
    SELECT  <include refid="Base_Column_List"/>
    FROM csd_approval_info cai
    WHERE cai.orderId  IN <foreach collection="list" item="list" separator="," open="(" close=")">#{list}</foreach>
  </select>
  <select id="selectByApplyId" parameterType="java.lang.String" resultType="java.util.Map">
  select u.realname ,u.mobile from  csd_approval_info cai left join user  u on u.uuid=cai.approvalId
  where  cai.approvalLevel='evaluate_install_collateral' and orderId=#{param1}  order by approvalTime desc limit 1
  
  </select>

  <select id="selectAllByOrderId"  resultMap="BaseResultMap">
    SELECT  <include refid="Base_Column_List"/>
    FROM csd_approval_info cai
    WHERE cai.orderId =#{param1}
  </select>
  
  <select id="selectNameByOrderIdOrderByApprovalTime"  parameterType="string" resultType="java.lang.String">
  	SELECT  u.realname  FROM  csd_approval_info c LEFT JOIN user u ON c.approvalId = u.uuid where c.approvalLevel='sign_contract' and c.orderId=#{orderId} ORDER BY c.approvalTime DESC LIMIT 1
  </select>
</mapper>