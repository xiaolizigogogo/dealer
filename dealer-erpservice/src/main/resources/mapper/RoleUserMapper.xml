<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.utonw.utonerp.mapper.RoleUserMapper">
    <resultMap id="BaseResultMap" type="com.utonw.dealer.api.entity.erp.RoleUser">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="rb_id" property="rbId" jdbcType="INTEGER"/>
        <result column="rb_role_id" property="rbRoleId" jdbcType="INTEGER"/>
        <result column="rb_user_id" property="rbUserId" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        rb_id, rb_role_id, rb_user_id
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from role_user
        where rb_id = #{rbId,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from role_user
        where rb_id = #{rbId,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.utonw.dealer.api.entity.erp.RoleUser">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into role_user (rb_id, rb_role_id, rb_user_id
        )
        values (#{rbId,jdbcType=INTEGER}, #{rbRoleId,jdbcType=INTEGER}, #{rbUserId,jdbcType=VARCHAR}
        )
    </insert>
    <insert id="insertSelective" parameterType="com.utonw.dealer.api.entity.erp.RoleUser">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into role_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="rbId != null">
                rb_id,
            </if>
            <if test="rbRoleId != null">
                rb_role_id,
            </if>
            <if test="rbUserId != null">
                rb_user_id,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="rbId != null">
                #{rbId,jdbcType=INTEGER},
            </if>
            <if test="rbRoleId != null">
                #{rbRoleId,jdbcType=INTEGER},
            </if>
            <if test="rbUserId != null">
                #{rbUserId,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.utonw.dealer.api.entity.erp.RoleUser">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update role_user
        <set>
            <if test="rbRoleId != null">
                rb_role_id = #{rbRoleId,jdbcType=INTEGER},
            </if>
            <if test="rbUserId != null">
                rb_user_id = #{rbUserId,jdbcType=VARCHAR},
            </if>
        </set>
        where rb_id = #{rbId,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.utonw.dealer.api.entity.erp.RoleUser">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update role_user
        set rb_role_id = #{rbRoleId,jdbcType=INTEGER},
        rb_user_id = #{rbUserId,jdbcType=VARCHAR}
        where rb_id = #{rbId,jdbcType=INTEGER}
    </update>

    <!--根据用户Id和角色Id查询数据-->
    <select id="findRoleUserById" resultMap="BaseResultMap">
        select <include refid="Base_Column_List"/>
        from role_user
        where 1=1
        <if test="roleId != null">
            and rb_role_id = #{roleId,jdbcType=INTEGER}
        </if>
        <if test="userId != null">
            and rb_user_id = #{userId,jdbcType=VARCHAR}
        </if>
    </select>
    
    <!-- 删除不存在于roleId中的数据 -->
    <delete id="deleteNotInRole" parameterType="java.util.Map">
        delete from role_user
        where rb_user_id=#{userId,jdbcType=VARCHAR}
        <if test="roleId.length > 0">
            and rb_role_id not in
            <foreach collection="roleId" item="item" separator="," open="(" close=")" index="">
                #{item}
            </foreach>
        </if>
    </delete>
    
    
    <!-- 删除roleId下的所有用户-->
    <delete id="deleteByRoleId" parameterType="java.lang.Integer">
        delete from role_user
        where rb_role_id=#{roleId,jdbcType=INTEGER}
    </delete>


    <!-- 删除roleId下的所有用户-->
    <delete id="deleteByUserId" parameterType="java.lang.String">s
        delete from role_user
        where rb_user_id=#{userId,jdbcType=VARCHAR}
    </delete>


    <!-- 删除roleId下的所有用户-->
    <delete id="deleteByUserIdAndRoleId" >
        delete from role_user
        where rb_user_id=#{userId,jdbcType=VARCHAR} AND rb_role_id={roleId,jdbcType=INTEGER }
    </delete>
    <select id="selectByUuid" resultMap="BaseResultMap">
    	select * from role_user where rb_user_id=#{param1}
    </select>
</mapper>