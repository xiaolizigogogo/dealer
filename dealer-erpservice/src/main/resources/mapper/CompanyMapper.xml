<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.utonw.utonerp.mapper.CompanyMapper">
    <resultMap id="BaseResultMap" type="com.utonw.dealer.api.entity.erp.Company">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="dialect" property="dialect" jdbcType="VARCHAR"/>
        <result column="parent_id" property="parentId" jdbcType="INTEGER"/>
        <result column="principal" property="principal" jdbcType="VARCHAR"/>
        <result column="telephone" property="telephone" jdbcType="VARCHAR"/>
        <result column="start_service_date" property="startServiceDate" jdbcType="DATE"/>
        <result column="stop_service_date" property="stopServiceDate" jdbcType="DATE"/>
        <result column="service_version" property="serviceVersion" jdbcType="VARCHAR"/>
        <result column="repayment_remind_days" property="repaymentRemindDays" jdbcType="INTEGER"/>
        <result column="manage_location" property="manageLocation" jdbcType="VARCHAR"/>
        <result column="business_license" property="businessLicense" jdbcType="VARCHAR"/>
        <result column="organization_code" property="organizationCode" jdbcType="VARCHAR"/>
        <result column="tax_card_code" property="taxCardCode" jdbcType="VARCHAR"/>
        <result column="register_at" property="registerAt" jdbcType="DATE"/>
        <result column="pledge_account" property="pledgeAccount" jdbcType="VARCHAR"/>
        <result column="pledge_amount" property="pledgeAmount" jdbcType="DECIMAL"/>
        <result column="overdue_rate" property="overdueRate" jdbcType="DECIMAL"/>
        <result column="superminiature_default_money" property="superminiatureDefaultMoney"
                jdbcType="DECIMAL"/>
        <result column="commission_index" property="commissionIndex" jdbcType="DECIMAL"/>
        <result column="management_cost_rate" property="managementCostRate" jdbcType="DECIMAL"/>
        <result column="valid_flg" property="validFlg" jdbcType="BIT"/>
        <result column="updated_at" property="updatedAt" jdbcType="TIMESTAMP"/>
        <result column="created_at" property="createdAt" jdbcType="TIMESTAMP"/>
        <result column="creditLimit" property="creditLimit" jdbcType="DECIMAL"/>
        <result column="limitPercentage" property="limitPercentage" jdbcType="DECIMAL"/>
    </resultMap>
    <resultMap id="ResultMapWithBLOBs" type="com.utonw.dealer.api.entity.erp.CompanyWithBLOBs"
               extends="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <result column="description" property="description" jdbcType="LONGVARCHAR"/>
        <result column="remark" property="remark" jdbcType="LONGVARCHAR"/>
    </resultMap>

    <resultMap id="ResultMapWithParentSubName" type="com.utonw.dealer.api.entity.erp.CompanyWithParentSubName">
        <result column="principal" property="principal" jdbcType="VARCHAR"/>
        <result column="telephone" property="telephone" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, name, dialect, parent_id, principal, telephone, start_service_date, stop_service_date,
        service_version, repayment_remind_days, manage_location, business_license,
        organization_code,
        tax_card_code, register_at, pledge_account, pledge_amount, overdue_rate,
        superminiature_default_money,
        commission_index, management_cost_rate, valid_flg, updated_at, created_at,
        creditLimit,limitPercentage
    </sql>
    <sql id="Blob_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        description, remark
    </sql>
    <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs"
            parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        ,
        <include refid="Blob_Column_List"/>
        from company
        where id = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from company
        where id = #{id,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.utonw.dealer.api.entity.erp.CompanyWithBLOBs">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into company (id, name, dialect,
        parent_id, principal, telephone,
        start_service_date, stop_service_date, service_version,
        repayment_remind_days, manage_location, business_license,
        organization_code, tax_card_code, register_at,
        pledge_account, pledge_amount, overdue_rate,
        superminiature_default_money, commission_index,
        management_cost_rate, valid_flg, updated_at,
        created_at, description, remark, creditLimit,
        limitPercentage
        )
        values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{dialect,jdbcType=VARCHAR},
        #{parentId,jdbcType=INTEGER}, #{principal,jdbcType=VARCHAR}, #{telephone,jdbcType=VARCHAR},
        #{startServiceDate,jdbcType=DATE}, #{stopServiceDate,jdbcType=DATE},
        #{serviceVersion,jdbcType=VARCHAR},
        #{repaymentRemindDays,jdbcType=INTEGER}, #{manageLocation,jdbcType=VARCHAR},
        #{businessLicense,jdbcType=VARCHAR},
        #{organizationCode,jdbcType=VARCHAR}, #{taxCardCode,jdbcType=VARCHAR},
        #{registerAt,jdbcType=DATE},
        #{pledgeAccount,jdbcType=VARCHAR}, #{pledgeAmount,jdbcType=DECIMAL},
        #{overdueRate,jdbcType=DECIMAL},
        #{superminiatureDefaultMoney,jdbcType=DECIMAL}, #{commissionIndex,jdbcType=DECIMAL},
        #{managementCostRate,jdbcType=DECIMAL}, #{validFlg,jdbcType=BIT},
        #{updatedAt,jdbcType=TIMESTAMP},
        #{createdAt,jdbcType=TIMESTAMP}, #{description,jdbcType=LONGVARCHAR},
        #{remark,jdbcType=LONGVARCHAR},#{creditLimit,jdbcType=DECIMAL},
        #{limitPercentage,jdbcType=DECIMAL}
        )
    </insert>
    <insert id="insertSelective" parameterType="com.utonw.dealer.api.entity.erp.CompanyWithBLOBs">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into company
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="name != null">
                name,
            </if>
            <if test="dialect != null">
                dialect,
            </if>
            <if test="parentId != null">
                parent_id,
            </if>
            <if test="principal != null">
                principal,
            </if>
            <if test="telephone != null">
                telephone,
            </if>
            <if test="startServiceDate != null">
                start_service_date,
            </if>
            <if test="stopServiceDate != null">
                stop_service_date,
            </if>
            <if test="serviceVersion != null">
                service_version,
            </if>
            <if test="repaymentRemindDays != null">
                repayment_remind_days,
            </if>
            <if test="manageLocation != null">
                manage_location,
            </if>
            <if test="businessLicense != null">
                business_license,
            </if>
            <if test="organizationCode != null">
                organization_code,
            </if>
            <if test="taxCardCode != null">
                tax_card_code,
            </if>
            <if test="registerAt != null">
                register_at,
            </if>
            <if test="pledgeAccount != null">
                pledge_account,
            </if>
            <if test="pledgeAmount != null">
                pledge_amount,
            </if>
            <if test="overdueRate != null">
                overdue_rate,
            </if>
            <if test="superminiatureDefaultMoney != null">
                superminiature_default_money,
            </if>
            <if test="commissionIndex != null">
                commission_index,
            </if>
            <if test="managementCostRate != null">
                management_cost_rate,
            </if>
            <if test="validFlg != null">
                valid_flg,
            </if>
            <if test="updatedAt != null">
                updated_at,
            </if>
            <if test="createdAt != null">
                created_at,
            </if>
            <if test="description != null">
                description,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="creditLimit != null">
                creditLimit,
            </if>
            <if test="limitPercentage != null">
                limitPercentage,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="name != null">
                #{name,jdbcType=VARCHAR},
            </if>
            <if test="dialect != null">
                #{dialect,jdbcType=VARCHAR},
            </if>
            <if test="parentId != null">
                #{parentId,jdbcType=INTEGER},
            </if>
            <if test="principal != null">
                #{principal,jdbcType=VARCHAR},
            </if>
            <if test="telephone != null">
                #{telephone,jdbcType=VARCHAR},
            </if>
            <if test="startServiceDate != null">
                #{startServiceDate,jdbcType=DATE},
            </if>
            <if test="stopServiceDate != null">
                #{stopServiceDate,jdbcType=DATE},
            </if>
            <if test="serviceVersion != null">
                #{serviceVersion,jdbcType=VARCHAR},
            </if>
            <if test="repaymentRemindDays != null">
                #{repaymentRemindDays,jdbcType=INTEGER},
            </if>
            <if test="manageLocation != null">
                #{manageLocation,jdbcType=VARCHAR},
            </if>
            <if test="businessLicense != null">
                #{businessLicense,jdbcType=VARCHAR},
            </if>
            <if test="organizationCode != null">
                #{organizationCode,jdbcType=VARCHAR},
            </if>
            <if test="taxCardCode != null">
                #{taxCardCode,jdbcType=VARCHAR},
            </if>
            <if test="registerAt != null">
                #{registerAt,jdbcType=DATE},
            </if>
            <if test="pledgeAccount != null">
                #{pledgeAccount,jdbcType=VARCHAR},
            </if>
            <if test="pledgeAmount != null">
                #{pledgeAmount,jdbcType=DECIMAL},
            </if>
            <if test="overdueRate != null">
                #{overdueRate,jdbcType=DECIMAL},
            </if>
            <if test="superminiatureDefaultMoney != null">
                #{superminiatureDefaultMoney,jdbcType=DECIMAL},
            </if>
            <if test="commissionIndex != null">
                #{commissionIndex,jdbcType=DECIMAL},
            </if>
            <if test="managementCostRate != null">
                #{managementCostRate,jdbcType=DECIMAL},
            </if>
            <if test="validFlg != null">
                #{validFlg,jdbcType=BIT},
            </if>
            <if test="updatedAt != null">
                #{updatedAt,jdbcType=TIMESTAMP},
            </if>
            <if test="createdAt != null">
                #{createdAt,jdbcType=TIMESTAMP},
            </if>
            <if test="description != null">
                #{description,jdbcType=LONGVARCHAR},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=LONGVARCHAR},
            </if>
            <if test="creditLimit != null">
                #{creditLimit,jdbcType=DECIMAL},
            </if>
            <if test="limitPercentage != null">
                #{limitPercentage,jdbcType=DECIMAL},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective"
            parameterType="com.utonw.dealer.api.entity.erp.CompanyWithBLOBs">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update company
        <set>
            <if test="name != null">
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="dialect != null">
                dialect = #{dialect,jdbcType=VARCHAR},
            </if>
            <if test="parentId != null">
                parent_id = #{parentId,jdbcType=INTEGER},
            </if>
            <if test="principal != null">
                principal = #{principal,jdbcType=VARCHAR},
            </if>
            <if test="telephone != null">
                telephone = #{telephone,jdbcType=VARCHAR},
            </if>
            <if test="startServiceDate != null">
                start_service_date = #{startServiceDate,jdbcType=DATE},
            </if>
            <if test="stopServiceDate != null">
                stop_service_date = #{stopServiceDate,jdbcType=DATE},
            </if>
            <if test="serviceVersion != null">
                service_version = #{serviceVersion,jdbcType=VARCHAR},
            </if>
            <if test="repaymentRemindDays != null">
                repayment_remind_days = #{repaymentRemindDays,jdbcType=INTEGER},
            </if>
            <if test="manageLocation != null">
                manage_location = #{manageLocation,jdbcType=VARCHAR},
            </if>
            <if test="businessLicense != null">
                business_license = #{businessLicense,jdbcType=VARCHAR},
            </if>
            <if test="organizationCode != null">
                organization_code = #{organizationCode,jdbcType=VARCHAR},
            </if>
            <if test="taxCardCode != null">
                tax_card_code = #{taxCardCode,jdbcType=VARCHAR},
            </if>
            <if test="registerAt != null">
                register_at = #{registerAt,jdbcType=DATE},
            </if>
            <if test="pledgeAccount != null">
                pledge_account = #{pledgeAccount,jdbcType=VARCHAR},
            </if>
            <if test="pledgeAmount != null">
                pledge_amount = #{pledgeAmount,jdbcType=DECIMAL},
            </if>
            <if test="overdueRate != null">
                overdue_rate = #{overdueRate,jdbcType=DECIMAL},
            </if>
            <if test="superminiatureDefaultMoney != null">
                superminiature_default_money = #{superminiatureDefaultMoney,jdbcType=DECIMAL},
            </if>
            <if test="commissionIndex != null">
                commission_index = #{commissionIndex,jdbcType=DECIMAL},
            </if>
            <if test="managementCostRate != null">
                management_cost_rate = #{managementCostRate,jdbcType=DECIMAL},
            </if>
            <if test="validFlg != null">
                valid_flg = #{validFlg,jdbcType=BIT},
            </if>
            <if test="updatedAt != null">
                updated_at = #{updatedAt,jdbcType=TIMESTAMP},
            </if>
            <if test="createdAt != null">
                created_at = #{createdAt,jdbcType=TIMESTAMP},
            </if>
            <if test="description != null">
                description = #{description,jdbcType=LONGVARCHAR},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=LONGVARCHAR},
            </if>
            <if test="creditLimit != null">
                creditLimit = #{creditLimit,jdbcType=DECIMAL},
            </if>
            <if test="limitPercentage != null">
                limitPercentage = #{limitPercentage,jdbcType=DECIMAL},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKeyWithBLOBs"
            parameterType="com.utonw.dealer.api.entity.erp.CompanyWithBLOBs">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update company
        set name = #{name,jdbcType=VARCHAR},
        dialect = #{dialect,jdbcType=VARCHAR},
        parent_id = #{parentId,jdbcType=INTEGER},
        principal = #{principal,jdbcType=VARCHAR},
        telephone = #{telephone,jdbcType=VARCHAR},
        start_service_date = #{startServiceDate,jdbcType=DATE},
        stop_service_date = #{stopServiceDate,jdbcType=DATE},
        service_version = #{serviceVersion,jdbcType=VARCHAR},
        repayment_remind_days = #{repaymentRemindDays,jdbcType=INTEGER},
        manage_location = #{manageLocation,jdbcType=VARCHAR},
        business_license = #{businessLicense,jdbcType=VARCHAR},
        organization_code = #{organizationCode,jdbcType=VARCHAR},
        tax_card_code = #{taxCardCode,jdbcType=VARCHAR},
        register_at = #{registerAt,jdbcType=DATE},
        pledge_account = #{pledgeAccount,jdbcType=VARCHAR},
        pledge_amount = #{pledgeAmount,jdbcType=DECIMAL},
        overdue_rate = #{overdueRate,jdbcType=DECIMAL},
        superminiature_default_money = #{superminiatureDefaultMoney,jdbcType=DECIMAL},
        commission_index = #{commissionIndex,jdbcType=DECIMAL},
        management_cost_rate = #{managementCostRate,jdbcType=DECIMAL},
        valid_flg = #{validFlg,jdbcType=BIT},
        updated_at = #{updatedAt,jdbcType=TIMESTAMP},
        created_at = #{createdAt,jdbcType=TIMESTAMP},
        description = #{description,jdbcType=LONGVARCHAR},
        remark = #{remark,jdbcType=LONGVARCHAR},
        creditLimit = #{creditLimit,jdbcType=DECIMAL},
        limitPercentage = #{limitPercentage,jdbcType=DECIMAL}
        where id = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.utonw.dealer.api.entity.erp.Company">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update company
        set name = #{name,jdbcType=VARCHAR},
        dialect = #{dialect,jdbcType=VARCHAR},
        parent_id = #{parentId,jdbcType=INTEGER},
        principal = #{principal,jdbcType=VARCHAR},
        telephone = #{telephone,jdbcType=VARCHAR},
        start_service_date = #{startServiceDate,jdbcType=DATE},
        stop_service_date = #{stopServiceDate,jdbcType=DATE},
        service_version = #{serviceVersion,jdbcType=VARCHAR},
        repayment_remind_days = #{repaymentRemindDays,jdbcType=INTEGER},
        manage_location = #{manageLocation,jdbcType=VARCHAR},
        business_license = #{businessLicense,jdbcType=VARCHAR},
        organization_code = #{organizationCode,jdbcType=VARCHAR},
        tax_card_code = #{taxCardCode,jdbcType=VARCHAR},
        register_at = #{registerAt,jdbcType=DATE},
        pledge_account = #{pledgeAccount,jdbcType=VARCHAR},
        pledge_amount = #{pledgeAmount,jdbcType=DECIMAL},
        overdue_rate = #{overdueRate,jdbcType=DECIMAL},
        superminiature_default_money = #{superminiatureDefaultMoney,jdbcType=DECIMAL},
        commission_index = #{commissionIndex,jdbcType=DECIMAL},
        management_cost_rate = #{managementCostRate,jdbcType=DECIMAL},
        valid_flg = #{validFlg,jdbcType=BIT},
        updated_at = #{updatedAt,jdbcType=TIMESTAMP},
        created_at = #{createdAt,jdbcType=TIMESTAMP},
        creditLimit = #{creditLimit,jdbcType=DECIMAL},
        limitPercentage = #{limitPercentage,jdbcType=DECIMAL}
        where id = #{id,jdbcType=INTEGER}
    </update>
    <select id="getCompanyPage" resultMap="BaseResultMap">
      SELECT * FROM company  com WHERE com.valid_flg='1'
        <if test="name != null and name != ''">
            AND com.name LIKE CONCAT('%', #{name},'%') 
        </if>
        <if test="principal != null and principal != ''">
            AND com.principal = #{principal}
        </if>
        <if test="telephone != null and telephone != ''">
            AND com.telephone LIKE CONCAT('%', #{telephone},'%')
        </if>
        <if test="startDate != null and startDate != '' and endDate != null and endDate != ''">
            AND com.registerAt =BETWEEN #{startDate} AND #{endDate}
        </if>
    </select>
    <select id="selectCompanyIds" resultType="java.lang.Integer">
        SELECT com.id FROM company  com WHERE com.valid_flg='1'
    </select>
    <insert id="insertCompamy" parameterType="com.utonw.dealer.api.entity.erp.Company" useGeneratedKeys="true" keyProperty="id">
        insert into company
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="name != null">
                name,
            </if>
            <if test="dialect != null">
                dialect,
            </if>
            <if test="parentId != null">
                parent_id,
            </if>
            <if test="principal != null">
                principal,
            </if>
            <if test="telephone != null">
                telephone,
            </if>
            <if test="startServiceDate != null">
                start_service_date,
            </if>
            <if test="stopServiceDate != null">
                stop_service_date,
            </if>
            <if test="serviceVersion != null">
                service_version,
            </if>
            <if test="repaymentRemindDays != null">
                repayment_remind_days,
            </if>
            <if test="manageLocation != null">
                manage_location,
            </if>
            <if test="businessLicense != null">
                business_license,
            </if>
            <if test="organizationCode != null">
                organization_code,
            </if>
            <if test="taxCardCode != null">
                tax_card_code,
            </if>
            <if test="registerAt != null">
                register_at,
            </if>
            <if test="pledgeAccount != null">
                pledge_account,
            </if>
            <if test="pledgeAmount != null">
                pledge_amount,
            </if>
            <if test="overdueRate != null">
                overdue_rate,
            </if>
            <if test="superminiatureDefaultMoney != null">
                superminiature_default_money,
            </if>
            <if test="commissionIndex != null">
                commission_index,
            </if>
            <if test="managementCostRate != null">
                management_cost_rate,
            </if>
            <if test="validFlg != null">
                valid_flg,
            </if>
            <if test="updatedAt != null">
                updated_at,
            </if>
            <if test="createdAt != null">
                created_at,
            </if>
            <if test="description != null">
                description,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="creditLimit != null">
                creditLimit,
            </if>
            <if test="limitPercentage != null">
                limitPercentage,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="name != null">
                #{name,jdbcType=VARCHAR},
            </if>
            <if test="dialect != null">
                #{dialect,jdbcType=VARCHAR},
            </if>
            <if test="parentId != null">
                #{parentId,jdbcType=INTEGER},
            </if>
            <if test="principal != null">
                #{principal,jdbcType=VARCHAR},
            </if>
            <if test="telephone != null">
                #{telephone,jdbcType=VARCHAR},
            </if>
            <if test="startServiceDate != null">
                #{startServiceDate,jdbcType=DATE},
            </if>
            <if test="stopServiceDate != null">
                #{stopServiceDate,jdbcType=DATE},
            </if>
            <if test="serviceVersion != null">
                #{serviceVersion,jdbcType=VARCHAR},
            </if>
            <if test="repaymentRemindDays != null">
                #{repaymentRemindDays,jdbcType=INTEGER},
            </if>
            <if test="manageLocation != null">
                #{manageLocation,jdbcType=VARCHAR},
            </if>
            <if test="businessLicense != null">
                #{businessLicense,jdbcType=VARCHAR},
            </if>
            <if test="organizationCode != null">
                #{organizationCode,jdbcType=VARCHAR},
            </if>
            <if test="taxCardCode != null">
                #{taxCardCode,jdbcType=VARCHAR},
            </if>
            <if test="registerAt != null">
                #{registerAt,jdbcType=DATE},
            </if>
            <if test="pledgeAccount != null">
                #{pledgeAccount,jdbcType=VARCHAR},
            </if>
            <if test="pledgeAmount != null">
                #{pledgeAmount,jdbcType=DECIMAL},
            </if>
            <if test="overdueRate != null">
                #{overdueRate,jdbcType=DECIMAL},
            </if>
            <if test="superminiatureDefaultMoney != null">
                #{superminiatureDefaultMoney,jdbcType=DECIMAL},
            </if>
            <if test="commissionIndex != null">
                #{commissionIndex,jdbcType=DECIMAL},
            </if>
            <if test="managementCostRate != null">
                #{managementCostRate,jdbcType=DECIMAL},
            </if>
            <if test="validFlg != null">
                #{validFlg,jdbcType=BIT},
            </if>
            <if test="updatedAt != null">
                #{updatedAt,jdbcType=TIMESTAMP},
            </if>
            <if test="createdAt != null">
                #{createdAt,jdbcType=TIMESTAMP},
            </if>
            <if test="description != null">
                #{description,jdbcType=LONGVARCHAR},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=LONGVARCHAR},
            </if>
            <if test="creditLimit != null">
                #{creditLimit,jdbcType=DECIMAL},
            </if>
            <if test="limitPercentage != null">
                #{limitPercentage,jdbcType=DECIMAL},
            </if>
        </trim>
    </insert>

    <select id="queryCompanyList" resultMap="BaseResultMap">
        SELECT * FROM company com WHERE com.valid_flg='1'
    </select>

    <select id="queryCompanyListByUserId" resultMap="BaseResultMap">
        SELECT *
        FROM company com
        LEFT JOIN user u on u.company_id = com.id
        WHERE com.valid_flg='1'
        AND u.uuid = #{userId, jdbcType=VARCHAR}
    </select>

    <select id="queryCompayByName" resultMap="BaseResultMap" parameterType="java.lang.String">
        SELECT * FROM company com WHERE com.valid_flg='1'
            AND com.name = #{name}


    </select>
    <select id="queryCompanyListByCustomerId" parameterType="java.lang.String" resultMap="BaseResultMap">
        SELECT * FROM company com
        left JOIN customer_register_info cri on cri.company_id = com.id
        WHERE com.valid_flg='1'
        and cri.uuid =#{customerId, jdbcType=VARCHAR}

    </select>

    <select id="queryCompanyParentAndSubName" parameterType="java.lang.Integer" resultMap="ResultMapWithParentSubName">
        SELECT
          principal,telephone
        FROM company co
        WHERE co.id = #{companyId, jdbcType=VARCHAR}
        OR co.parent_id IN(#{companyId, jdbcType=VARCHAR},'');
    </select>
    
    <select id="queryCompanyDataAccessLevel" parameterType="java.lang.String" resultMap="BaseResultMap">
      SELECT * FROM company com INNER JOIN user u on com.id = u.company_id
	  where com.valid_flg = '1' and u.uuid = #{uuid, jdbcType=VARCHAR} 
    </select>

    <select id="selectAccountNameExistService" parameterType="java.lang.String" resultType="java.lang.Boolean">
      SELECT IF(u.account_name != '',TRUE,FALSE)
      FROM user u
      WHERE u.active_flg != '0'
      AND u.account_name = #{accountName}
    </select>
</mapper>